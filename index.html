<!DOCTYPE html>
<html>
<head>
  <title>turbidity - LeafLet Preview</title>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
   

  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet" type="text/css"/>
  <style type="text/css">
    #basemapslidercontainer {
      position: absolute;
      top: 50px;
      right: 10px;
      z-index: 1000;
    }

    #basemapslider{
      font-size:62.5%;
      margin: 14px;
      height: 125px;
      width:7px;
    }

    #map{
       width: 800px;
       height: 600px
           
    }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
  <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
        integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
      crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
        integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
        crossorigin=""></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    
  <script>
    $(document).ready(function () {
      $("#basemapslider").slider({
            animate: true,
            value: 1,
            orientation: "vertical",
            min: 0,
            max: 1,
            step: 0.1,
            slide: function (event, ui) {
                turbtile.setOpacity(ui.value);
            }
       });

        $('#basemapslider').mousedown(function(){
          map.dragging.disable();
        })

        $('#basemapslider').mouseup(function(){
          map.dragging.enable();
        })

      var map = L.map('map').setView([51.488937, 6.056270], 17);
      var baselayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        maxZoom: 20,
		maxNativeZoom: 20,
        attribution: 'Layer sources: ESRI imagery'
      }).addTo(map);
        
      var baselayer2 = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 20,
		maxNativeZoom: 20,
        attribution: 'OpenStreetMap'
      }).addTo(map);
	  
	  var turbtile =L.tileLayer('/tiles/turbidity/{z}/{x}/{y}.png', {
        maxZoom: 20,
		maxNativeZoom: 20,
        tms: false,
        attribution: 'turbidity and ortophoto layers are generated by QTiles'
      }).addTo(map);

      var rgbtile =L.tileLayer('/tiles/rgbtile20/{z}/{x}/{y}.png', {
        maxZoom: 20,
		maxNativeZoom: 20,
        tms: false,
        attribution: 'turbidity and ortophoto layers are generated by QTiles'
      }).addTo(map);
	  
	   function onZoomend() {
    var currentZoom = map.getZoom();
    document.getElementById("zlevel").innerHTML=currentZoom;
 };
	  map.on('zoomend', onZoomend);
      

        var w1= L.circle([51.48914, 6.052221],{radius: 3}).bindPopup("<b>w1</b>  <br/> Turbidity= 16 NTU, TSM= 11.0 mg/l").addTo(map),
            w2= L.circle([51.48934, 6.053233],{radius: 3}).bindPopup("<b>w2</b>  <br/> Turbidity= 14 NTU, TSM= 9.2 mg/l").addTo(map),
            w3= L.circle([51.48915, 6.054329],{radius: 3}).bindPopup("<b>w3</b>  <br/> Turbidity= 19 NTU, TSM= 9.4 mg/l").addTo(map),
            w4= L.circle([51.48919, 6.055401],{radius: 3}).bindPopup("<b>w4</b>  <br/> Turbidity= 17 NTU, TSM= 15.0 mg/l").addTo(map),
            w5= L.circle([51.48875, 6.056170],{radius: 3}).bindPopup("<b>w5</b>  <br/> Turbidity= 14 NTU, TSM= 8.2 mg/l").addTo(map),
            w6= L.circle([51.48897, 6.057172],{radius: 3}).bindPopup("<b>w6</b>  <br/> Turbidity= 15 NTU, TSM= 8.8 mg/l").addTo(map),
            w7= L.circle([51.48875, 6.058098],{radius: 3}).bindPopup("<b>w7</b>  <br/> Turbidity= 11 NTU, TSM= 7.6 mg/l").addTo(map),
            w8= L.circle([51.48852, 6.058923],{radius: 3}).bindPopup("<b>w8</b>  <br/> Turbidity= 16 NTU, TSM= 10.0 mg/l").addTo(map),
            w9= L.circle([51.48791, 6.059324],{radius: 3}).bindPopup("<b>w9</b>  <br/> Turbidity= 15 NTU, TSM= 9.0 mg/l").addTo(map),
            w10= L.circle([51.48751, 6.059944],{radius: 3}).bindPopup("<b>w10</b> <br/> Turbidity= 15 NTU, TSM= 7.6 mg/l").addTo(map)
            
        var val_points = L.layerGroup([w1,w2,w3,w4,w5,w6,w7,w8,w9,w10]).addTo(map);
        
        L.control.scale().addTo(map);
        
        var home = {
            lat: 51.488937,
            lng: 6.056270,
            zoom: 17
        }; 
        
        L.easyButton('fa-map-marker-alt',function(btn,map){
            map.setView([home.lat, home.lng], home.zoom);
        },'Zoom To Home').addTo(map);
        
        
        var center = [-33.8650, 151.2094];  
        var imageUrl = 'turb_14919_Vscalebar.png',
            imageBounds = [center, [-35.8650, 154.2094]];

        L.imageOverlay(imageUrl, imageBounds).addTo(map);
        
        L.easyButton('fa-info',function(){
            alert('Turbidity colour scale (darkest to brightest):\n14 - 19 NTU ')}).addTo(map);

        


       
        
        

      L.control.layers({'Satellite imagery':baselayer,"Topographic map":baselayer2},{' Orthophoto':rgbtile,'Turbidity (NTU) map':turbtile,"Validation points":val_points}).addTo(map);
    })
  </script>
</head>
<body>
  <div id="map">
    <div id="basemapslidercontainer">
      <div id="basemapslider">
    </div>
  </div>
  </div>
</body>
</html>
